---
page_title: "taikun_project Resource - terraform-provider-taikun"
subcategory: ""
description: |-   Taikun Project
---

# taikun_project (Resource)

Taikun Project

~> **Role Requirement** To use the `taikun_project` resource, you need a Manager or Partner account.

-> **Organization ID** `organization_id` can be specified for the Partner role, it otherwise defaults to the user's organization. If specified, the project's cloud credential must be in the same organization.

## Current limitations of the `vm` and `disk` blocks.

!> **Standalone VMs** Reordering `vm` blocks is not yet supported.
Adding a `vm` block to a `taikun_project` resource is only supported if it is added
below the preexisting `vm` blocks in the `taikun_project` resource.
If you insert a `vm` block at the beginning or somewhere in the middle of a list of
`vm` blocks, the VMs declared in the blocks that follow will be recreated!
Deletion of `vm` blocks is also only supported for trailing blocks.
If you delete a `vm` block at the beginning or somewhere in the middle of a list of
`vm` blocks, the VMs declared in the blocks that follow will be recreated!

!> **Standalone VM disks** Reordering `disk` blocks is not yet supported.
Adding a `disk` block to a `vm` block is only supported if it is added
below the preexisting `disk` blocks in the `vm` block.
If you insert a `disk` block at the beginning or somewhere in the middle of a list of
`disk` blocks, the disks declared in the blocks that follow will be recreated!
Deletion of `disk` blocks is also only supported for trailing blocks.
If you delete a `disk` block at the beginning or somewhere in the middle of a list of
`disk` blocks, the disks declared in the blocks that follow will be recreated!

## Example Usage

```terraform
resource "taikun_cloud_credential_openstack" "foo" {
  name = "foo-credentials"
}

resource "taikun_access_profile" "foo" {
  name = "foo"
}

resource "taikun_alerting_profile" "foo" {
  name     = "foo"
  reminder = "Daily"
}

resource "taikun_kubernetes_profile" "foo" {
  name = "foo"
}

resource "taikun_standalone_profile" "foo" {
  name       = "foo"
  public_key = "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGQwGpzLk0IzqKnBpaHqecLA+X4zfHamNe9Rg3CoaXHF :oui_oui:"
}

data "taikun_flavors" "small" {
  cloud_credential_id = resource.taikun_cloud_credential_openstack.foo.id
  min_cpu             = 2
  max_cpu             = 8
}

data "taikun_images_openstack" "foo" {
  cloud_credential_id = resource.taikun_cloud_credential_openstack.foo.id
}

locals {
  flavors = [for flavor in data.taikun_flavors.small.flavors : flavor.name]
  images  = [for image in data.taikun_images_openstack.foo.images : image.id]
}

resource "taikun_project" "foobar" {
  name                = "foobar"
  cloud_credential_id = resource.taikun_cloud_credential_openstack.foo.id

  access_profile_id     = resource.taikun_access_profile.foo.id
  alerting_profile_id   = resource.taikun_alerting_profile.foo.id
  kubernetes_profile_id = resource.taikun_kubernetes_profile.foo.id
  policy_profile_id     = resource.taikun_policy_profile.foo.id

  expiration_date = "21/12/2012"
  auto_upgrade    = true
  monitoring      = true

  quota_cpu_units = 64
  quota_disk_size = 1024
  quota_ram_size  = 256

  # If setting the kubernetes_version, be sure to use the meta-argument
  # ignore_changes to ignore futures changes in case of kubernetes upgrade
  # https://www.terraform.io/language/meta-arguments/lifecycle#ignore_changes
  kubernetes_version = "v1.21.5"
  lifecycle {
    ignore_changes = [
      kubernetes_version,
    ]
  }

  flavors = local.flavors
  images  = local.images

  vm {
    name        = "b"
    volume_size = 30

    flavor   = local.flavors[0]
    image_id = local.images[0]

    cloud_init            = ""
    standalone_profile_id = resource.taikun_standalone_profile.foo.id
    public_ip             = true

    volume_type = "ssd-2000iops"

    tag {
      key   = "key"
      value = "value"
    }

    disk {
      name        = "name"
      size        = 30
      volume_type = "ssd-2000iops"

      // lun_id would have been required with Azure
      // for example:
      // lun_id = 3
    }
  }

  server_bastion {
    name   = "b"
    flavor = local.flavors[0]
  }
  server_kubemaster {
    name   = "m"
    flavor = local.flavors[0]
  }
  server_kubeworker {
    name      = "w"
    flavor    = local.flavors[0]
    disk_size = 30
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cloud_credential_id` (String) ID of the cloud credential used to create the project's servers.
- `name` (String) Project name.

### Optional

- `access_profile_id` (String) ID of the project's access profile. Defaults to the default access profile of the project's organization.
- `alerting_profile_id` (String) ID of the project's alerting profile.
- `auto_upgrade` (Boolean) If enabled, the Kubespray version will be automatically upgraded when a new version is available. Defaults to `false`.
- `backup_credential_id` (String) ID of the backup credential. If unspecified, backups are disabled.
- `delete_on_expiration` (Boolean) If enabled, the project will be deleted on the expiration date and it will not be possible to recover it. Defaults to `false`. Required with: `expiration_date`.
- `expiration_date` (String) Project's expiration date in the format: 'dd/mm/yyyy'.
- `flavors` (Set of String) List of flavors bound to the project.
- `images` (Set of String) List of images bound to the project.
- `kubernetes_profile_id` (String) ID of the project's Kubernetes profile. Defaults to the default Kubernetes profile of the project's organization.
- `kubernetes_version` (String) Kubernetes Version at project creation. Use the meta-argument `ignore_changes` to ignore future upgrades.
- `lock` (Boolean) Indicates whether to lock the project. Defaults to `false`.
- `monitoring` (Boolean) Kubernetes cluster monitoring. Defaults to `false`.
- `organization_id` (String) ID of the organization which owns the project.
- `policy_profile_id` (String) ID of the Policy profile. If unspecified, Gatekeeper is disabled.
- `quota_cpu_units` (Number) Maximum CPU units. Defaults to `1000000`.
- `quota_disk_size` (Number) Maximum disk size in GBs. Defaults to `102400`.
- `quota_ram_size` (Number) Maximum RAM size in GBs. Defaults to `102400`.
- `quota_vm_cpu_units` (Number) Maximum CPU units for standalone VMs. Defaults to `1000000`.
- `quota_vm_ram_size` (Number) Maximum RAM size in GBs for standalone VMs. Defaults to `102400`.
- `quota_vm_volume_size` (Number) Maximum volume size in GBs for standalone VMs. Defaults to `102400`.
- `router_id_end_range` (Number) Router ID end range (specify only if using OpenStack cloud credentials with Taikun Load Balancer enabled). Required with: `router_id_start_range`, `taikun_lb_flavor`.
- `router_id_start_range` (Number) Router ID start range (specify only if using OpenStack cloud credentials with Taikun Load Balancer enabled). Required with: `router_id_end_range`, `taikun_lb_flavor`.
- `server_bastion` (Block Set, Max: 1) Bastion server. Required with: `server_kubemaster`, `server_kubeworker`. (see [below for nested schema](#nestedblock--server_bastion))
- `server_kubemaster` (Block Set) Kubemaster server. Required with: `server_bastion`, `server_kubeworker`. (see [below for nested schema](#nestedblock--server_kubemaster))
- `server_kubeworker` (Block Set) Kubeworker server. Required with: `server_bastion`, `server_kubemaster`. (see [below for nested schema](#nestedblock--server_kubeworker))
- `taikun_lb_flavor` (String) OpenStack flavor for the Taikun load balancer (specify only if using OpenStack cloud credentials with Taikun Load Balancer enabled). Required with: `router_id_end_range`, `router_id_start_range`.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `vm` (Block List) Virtual machines. (see [below for nested schema](#nestedblock--vm))

### Read-Only

- `access_ip` (String) Public IP address of the bastion.
- `alerting_profile_name` (String) Name of the project's alerting profile.
- `id` (String) Project ID.

<a id="nestedblock--server_bastion"></a>
### Nested Schema for `server_bastion`

Required:

- `flavor` (String) The server's flavor.
- `name` (String) Name of the server.

Optional:

- `disk_size` (Number) The server's disk size in GBs. Defaults to `30`.

Read-Only:

- `created_by` (String) The creator of the server.
- `id` (String) ID of the server.
- `ip` (String) IP of the server.
- `last_modified` (String) The time and date of last modification.
- `last_modified_by` (String) The last user to have modified the server.
- `status` (String) Server status.


<a id="nestedblock--server_kubemaster"></a>
### Nested Schema for `server_kubemaster`

Required:

- `flavor` (String) The server's flavor.
- `name` (String) Name of the server.

Optional:

- `disk_size` (Number) The server's disk size in GBs. Defaults to `30`.
- `kubernetes_node_label` (Block Set) Attach Kubernetes node labels. (see [below for nested schema](#nestedblock--server_kubemaster--kubernetes_node_label))
- `wasm` (Boolean) Enable if the server should support WASM. Defaults to `false`.

Read-Only:

- `created_by` (String) The creator of the server.
- `id` (String) ID of the server.
- `ip` (String) IP of the server.
- `last_modified` (String) The time and date of last modification.
- `last_modified_by` (String) The last user to have modified the server.
- `status` (String) Server status.

<a id="nestedblock--server_kubemaster--kubernetes_node_label"></a>
### Nested Schema for `server_kubemaster.kubernetes_node_label`

Required:

- `key` (String) Kubernetes node label key.
- `value` (String) Kubernetes node label value.



<a id="nestedblock--server_kubeworker"></a>
### Nested Schema for `server_kubeworker`

Required:

- `flavor` (String) The server's flavor.
- `name` (String) Name of the server.

Optional:

- `disk_size` (Number) The server's disk size in GBs. Defaults to `30`.
- `kubernetes_node_label` (Block Set) Attach Kubernetes node labels. (see [below for nested schema](#nestedblock--server_kubeworker--kubernetes_node_label))
- `wasm` (Boolean) Enable if the server should support WASM. Defaults to `false`.

Read-Only:

- `created_by` (String) The creator of the server.
- `id` (String) ID of the server.
- `ip` (String) IP of the server.
- `last_modified` (String) The time and date of last modification.
- `last_modified_by` (String) The last user to have modified the server.
- `status` (String) Server status.

<a id="nestedblock--server_kubeworker--kubernetes_node_label"></a>
### Nested Schema for `server_kubeworker.kubernetes_node_label`

Required:

- `key` (String) Kubernetes node label key.
- `value` (String) Kubernetes node label value.



<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `update` (String)


<a id="nestedblock--vm"></a>
### Nested Schema for `vm`

Required:

- `flavor` (String) The VM's flavor.
- `image_id` (String) The VM's image ID (updating this field will recreate the VM).
- `name` (String) Name of the VM (updating this field will recreate the VM).
- `standalone_profile_id` (String) Standalone profile ID bound to the VM (updating this field will recreate the VM).
- `volume_size` (Number) The VM's volume size in GBs (updating this field will recreate the VM).

Optional:

- `cloud_init` (String) Cloud init (updating this field will recreate the VM). Defaults to ` `.
- `disk` (Block List) Disks associated with the VM. (see [below for nested schema](#nestedblock--vm--disk))
- `public_ip` (Boolean) Whether a public IP will be available (updating this field will recreate the VM if the project isn't hosted on OpenStack). Defaults to `false`.
- `tag` (Block Set) Tags linked to the VM (updating this field will recreate the VM). (see [below for nested schema](#nestedblock--vm--tag))
- `username` (String) The VM's username (required for Azure).
- `volume_type` (String) Volume type (updating this field will recreate the VM).

Read-Only:

- `access_ip` (String) Access IP of the VM.
- `created_by` (String) The creator of the VM.
- `id` (String) ID of the VM.
- `image_name` (String) The VM's image name.
- `ip` (String) IP of the VM.
- `last_modified` (String) The time and date of last modification.
- `last_modified_by` (String) The last user to have modified the VM.
- `status` (String) VM status.

<a id="nestedblock--vm--disk"></a>
### Nested Schema for `vm.disk`

Required:

- `name` (String) Name of the disk.
- `size` (Number) The disk size in GBs.

Optional:

- `lun_id` (Number) LUN ID (required with Azure).
- `volume_type` (String) Type of the volume (only valid with OpenStack).

Read-Only:

- `id` (String) ID of the disk.


<a id="nestedblock--vm--tag"></a>
### Nested Schema for `vm.tag`

Required:

- `key` (String) Key of the tag.
- `value` (String) Value of the tag.

## Import

Import is supported using the following syntax:

```shell
terraform import taikun_project.myproject 42
```
